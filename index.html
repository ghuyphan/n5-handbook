<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N5 Learning Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #F4F7FE;
            --text-primary: #1a1a2e;
            --text-secondary: #5a5a78;
            --accent-pink: #EC4899;
            --accent-blue: #3B82F6;
            --accent-green: #22C55E;
            --accent-red: #EF4444;
            --accent-purple: #8B5CF6;
            --accent-orange: #F97316;
            --glass-bg: rgba(255, 255, 255, 0.55);
            --glass-border: rgba(255, 255, 255, 0.25);
            --shadow-color: rgba(99, 102, 241, 0.08);
        }
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: var(--bg-main);
            background-image: 
                radial-gradient(at 27% 37%, hsla(215, 98%, 61%, 0.1) 0px, transparent 50%),
                radial-gradient(at 97% 21%, hsla(340, 96%, 76%, 0.1) 0px, transparent 50%),
                radial-gradient(at 75% 88%, hsla(240, 96%, 76%, 0.1) 0px, transparent 50%);
            color: var(--text-primary);
        }
        
        .glass-effect {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 260px 1fr 320px;
            gap: 1.5rem;
        }
        @media (max-width: 1200px) {
            .main-grid { grid-template-columns: 220px 1fr; }
            .right-sidebar { display: none; }
        }
        @media (max-width: 768px) {
            .main-grid { grid-template-columns: 1fr; }
            .left-sidebar {
                position: fixed; top: 0; left: -100%; width: 250px;
                height: 100%; z-index: 100; transition: left 0.3s ease-in-out;
                border-radius: 0;
            }
            .left-sidebar.open { left: 0; }
            .mobile-header { display: flex; }
            .main-header { display: none; }
            .mobile-search-bar { display: block; }
        }
        body.sidebar-open {
            overflow: hidden;
        }

        .nav-item.active {
            background-color: var(--accent-blue);
            color: white;
            box-shadow: 0 4px 14px rgba(59, 130, 246, 0.3);
        }
        .nav-item.active svg { color: white !important; }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .card-container { position: relative; }
        .card { perspective: 1200px; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.7s; transform-style: preserve-3d; }
        .card.is-flipped .card-inner { transform: rotateY(180deg); }
        .card-face {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; -webkit-backface-visibility: hidden;
            display: flex; align-items: center; justify-content: center;
            border-radius: 16px;
        }
        .card-face-front {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        .card-face-back { transform: rotateY(180deg); color: white; padding: 1rem; flex-direction: column; justify-content: space-around; text-align: center; }

        .quiz-option.selected { background-color: var(--accent-blue); color: white; border-color: var(--accent-blue); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); }
        .quiz-option.correct { background-color: var(--accent-green) !important; color: white !important; border-color: var(--accent-green) !important; }
        .quiz-option.incorrect { background-color: var(--accent-red) !important; color: white !important; border-color: var(--accent-red) !important; }
        
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, padding 0.3s ease-out; padding: 0 1.25rem; }
        .open + .accordion-content { max-height: 500px; padding: 0 1.25rem 1.25rem 1.25rem; }
        .open .accordion-icon { transform: rotate(180deg); }
        
        .progress-circle {
            transition: stroke-dashoffset 0.5s ease-in-out;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .learn-toggle {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.2s ease;
        }
        .learn-toggle:hover {
            transform: scale(1.1);
        }
        .learn-toggle.learned {
            background-color: var(--accent-green);
        }
        .learn-toggle svg {
            color: var(--accent-green);
        }
        .learn-toggle.learned svg {
            color: white;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Mobile Header -->
    <header class="mobile-header md:hidden sticky top-0 glass-effect z-40 p-4 flex items-center justify-between">
        <h1 class="text-xl font-bold text-gray-800">JLPT N5 Prep</h1>
        <button id="menu-toggle" class="p-2">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
        </button>
    </header>

    <div class="main-grid p-0 md:p-6 lg:p-8">
        <!-- Left Sidebar -->
        <aside id="sidebar" class="left-sidebar glass-effect p-6 flex-col h-full hidden md:flex rounded-2xl">
            <div class="flex items-center gap-3 mb-10">
                <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-500/30">
                    N5
                </div>
                <h1 class="text-2xl font-bold">JLPT Prep</h1>
            </div>
            <nav id="tabs" class="space-y-2">
                <button onclick="changeTab('hiragana')" class="nav-item w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-gray-600 hover:bg-blue-100 transition-all duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-pink-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /></svg>
                    <span>ã²ã‚‰ãŒãª</span>
                </button>
                <button onclick="changeTab('katakana')" class="nav-item w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-gray-600 hover:bg-blue-100 transition-all duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" /></svg>
                    <span>ã‚«ã‚¿ã‚«ãƒŠ</span>
                </button>
                <button onclick="changeTab('kanji')" class="nav-item w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-gray-600 hover:bg-blue-100 transition-all duration-200">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" /></svg>
                    <span>æ¼¢å­—</span>
                </button>
                <button onclick="changeTab('vocab')" class="nav-item w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-gray-600 hover:bg-blue-100 transition-all duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A2 2 0 013 12V7a4 4 0 014-4z" /></svg>
                    <span>å˜èª</span>
                </button>
                <button onclick="changeTab('grammar')" class="nav-item w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-gray-600 hover:bg-blue-100 transition-all duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7" /></svg>
                    <span>æ–‡æ³•</span>
                </button>
                <button onclick="changeTab('reading')" class="nav-item w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-gray-600 hover:bg-blue-100 transition-all duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z" /></svg>
                    <span>èª­è§£</span>
                </button>
                <button onclick="changeTab('listening')" class="nav-item w-full flex items-center gap-3 p-3 rounded-lg font-semibold text-gray-600 hover:bg-blue-100 transition-all duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg>
                    <span>è´è§£</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="p-4 md:p-0">
            <header class="main-header mb-8 items-center justify-between hidden md:flex">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">My Learning Plan</h1>
                    <p class="text-gray-500">JLPT N5 Final Prep Guide</p>
                </div>
                <div class="relative w-full max-w-xs">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                         <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                    <input type="search" id="search-input" placeholder="Search current tab..." class="w-full pl-10 pr-4 py-2.5 rounded-xl focus:ring-2 focus:ring-blue-400 focus:border-transparent transition glass-effect">
                </div>
            </header>
            
            <!-- Mobile Search Bar -->
            <div class="mobile-search-bar hidden md:hidden mb-4 px-4">
                 <div class="relative w-full">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                         <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                    <input type="search" id="mobile-search-input" placeholder="Search current tab..." class="w-full pl-10 pr-4 py-2.5 rounded-xl transition glass-effect border-none">
                </div>
            </div>

            <main id="main-content" class="px-4 md:px-0">
                <div id="hiragana" class="tab-content"></div>
                <div id="katakana" class="tab-content"></div>
                <div id="kanji" class="tab-content"></div>
                <div id="vocab" class="tab-content"><div id="vocab-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 gap-4"></div></div>
                <div id="grammar" class="tab-content"><div id="grammar-container" class="space-y-4"></div></div>
                <div id="reading" class="tab-content"><div id="reading-container" class="space-y-8"></div></div>
                <div id="listening" class="tab-content"><div id="listening-container" class="space-y-8"></div></div>
            </main>
        </div>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <div class="sticky top-8">
                <div id="progress-overview" class="glass-effect p-6 rounded-2xl">
                    <!-- Progress will be injected here by JS -->
                </div>
            </div>
        </aside>
    </div>
    <div id="overlay" class="fixed inset-0 bg-black/60 z-50 hidden md:hidden"></div>

<script>
// --- DATA ---
const hiraganaData = { "Monographs (ã‚-ã‚“)": [ {kana: 'ã‚', romaji: 'a'}, {kana: 'ã„', romaji: 'i'}, {kana: 'ã†', romaji: 'u'}, {kana: 'ãˆ', romaji: 'e'}, {kana: 'ãŠ', romaji: 'o'}, {kana: 'ã‹', romaji: 'ka'}, {kana: 'ã', romaji: 'ki'}, {kana: 'ã', romaji: 'ku'}, {kana: 'ã‘', romaji: 'ke'}, {kana: 'ã“', romaji: 'ko'}, {kana: 'ã•', romaji: 'sa'}, {kana: 'ã—', romaji: 'shi'}, {kana: 'ã™', romaji: 'su'}, {kana: 'ã›', romaji: 'se'}, {kana: 'ã', romaji: 'so'}, {kana: 'ãŸ', romaji: 'ta'}, {kana: 'ã¡', romaji: 'chi'}, {kana: 'ã¤', romaji: 'tsu'}, {kana: 'ã¦', romaji: 'te'}, {kana: 'ã¨', romaji: 'to'}, {kana: 'ãª', romaji: 'na'}, {kana: 'ã«', romaji: 'ni'}, {kana: 'ã¬', romaji: 'nu'}, {kana: 'ã­', romaji: 'ne'}, {kana: 'ã®', romaji: 'no'}, {kana: 'ã¯', romaji: 'ha'}, {kana: 'ã²', romaji: 'hi'}, {kana: 'ãµ', romaji: 'fu'}, {kana: 'ã¸', romaji: 'he'}, {kana: 'ã»', romaji: 'ho'}, {kana: 'ã¾', romaji: 'ma'}, {kana: 'ã¿', romaji: 'mi'}, {kana: 'ã‚€', romaji: 'mu'}, {kana: 'ã‚', romaji: 'me'}, {kana: 'ã‚‚', romaji: 'mo'}, {kana: 'ã‚„', romaji: 'ya'}, {kana: 'ã‚†', romaji: 'yu'}, {kana: 'ã‚ˆ', romaji: 'yo'}, {kana: 'ã‚‰', romaji: 'ra'}, {kana: 'ã‚Š', romaji: 'ri'}, {kana: 'ã‚‹', romaji: 'ru'}, {kana: 'ã‚Œ', romaji: 're'}, {kana: 'ã‚', romaji: 'ro'}, {kana: 'ã‚', romaji: 'wa'}, {kana: 'ã‚’', romaji: 'wo'}, {kana: 'ã‚“', romaji: 'n'} ], "Diacritics (æ¿ç‚¹/åŠæ¿ç‚¹)": [ {kana: 'ãŒ', romaji: 'ga'}, {kana: 'ã', romaji: 'gi'}, {kana: 'ã', romaji: 'gu'}, {kana: 'ã’', romaji: 'ge'}, {kana: 'ã”', romaji: 'go'}, {kana: 'ã–', romaji: 'za'}, {kana: 'ã˜', romaji: 'ji'}, {kana: 'ãš', romaji: 'zu'}, {kana: 'ãœ', romaji: 'ze'}, {kana: 'ã', romaji: 'zo'}, {kana: 'ã ', romaji: 'da'}, {kana: 'ã¢', romaji: 'ji'}, {kana: 'ã¥', romaji: 'zu'}, {kana: 'ã§', romaji: 'de'}, {kana: 'ã©', romaji: 'do'}, {kana: 'ã°', romaji: 'ba'}, {kana: 'ã³', romaji: 'bi'}, {kana: 'ã¶', romaji: 'bu'}, {kana: 'ã¹', romaji: 'be'}, {kana: 'ã¼', romaji: 'bo'}, {kana: 'ã±', romaji: 'pa'}, {kana: 'ã´', romaji: 'pi'}, {kana: 'ã·', romaji: 'pu'}, {kana: 'ãº', romaji: 'pe'}, {kana: 'ã½', romaji: 'po'} ], "Digraphs (æ‹—éŸ³)": [ {kana: 'ãã‚ƒ', romaji: 'kya'}, {kana: 'ãã‚…', romaji: 'kyu'}, {kana: 'ãã‚‡', romaji: 'kyo'}, {kana: 'ã—ã‚ƒ', romaji: 'sha'}, {kana: 'ã—ã‚…', romaji: 'shu'}, {kana: 'ã—ã‚‡', romaji: 'sho'}, {kana: 'ã¡ã‚ƒ', romaji: 'cha'}, {kana: 'ã¡ã‚…', romaji: 'chu'}, {kana: 'ã¡ã‚‡', romaji: 'cho'}, {kana: 'ã«ã‚ƒ', romaji: 'nya'}, {kana: 'ã«ã‚…', romaji: 'nyu'}, {kana: 'ã«ã‚‡', romaji: 'nyo'}, {kana: 'ã²ã‚ƒ', romaji: 'hya'}, {kana: 'ã²ã‚…', romaji: 'hyu'}, {kana: 'ã²ã‚‡', romaji: 'hyo'}, {kana: 'ã¿ã‚ƒ', romaji: 'mya'}, {kana: 'ã¿ã‚…', romaji: 'myu'}, {kana: 'ã¿ã‚‡', romaji: 'myo'}, {kana: 'ã‚Šã‚ƒ', romaji: 'rya'}, {kana: 'ã‚Šã‚…', romaji: 'ryu'}, {kana: 'ã‚Šã‚‡', romaji: 'ryo'}, {kana: 'ãã‚ƒ', romaji: 'gya'}, {kana: 'ãã‚…', romaji: 'gyu'}, {kana: 'ãã‚‡', romaji: 'gyo'}, {kana: 'ã˜ã‚ƒ', romaji: 'ja'}, {kana: 'ã˜ã‚…', romaji: 'ju'}, {kana: 'ã˜ã‚‡', romaji: 'jo'}, {kana: 'ã³ã‚ƒ', romaji: 'bya'}, {kana: 'ã³ã‚…', romaji: 'byu'}, {kana: 'ã³ã‚‡', romaji: 'byo'}, {kana: 'ã´ã‚ƒ', romaji: 'pya'}, {kana: 'ã´ã‚…', romaji: 'pyu'}, {kana: 'ã´ã‚‡', romaji: 'pyo'} ] };
const katakanaData = { "Monographs (ã‚¢-ãƒ³)": [ {kana: 'ã‚¢', romaji: 'a'}, {kana: 'ã‚¤', romaji: 'i'}, {kana: 'ã‚¦', romaji: 'u'}, {kana: 'ã‚¨', romaji: 'e'}, {kana: 'ã‚ª', romaji: 'o'}, {kana: 'ã‚«', romaji: 'ka'}, {kana: 'ã‚­', romaji: 'ki'}, {kana: 'ã‚¯', romaji: 'ku'}, {kana: 'ã‚±', romaji: 'ke'}, {kana: 'ã‚³', romaji: 'ko'}, {kana: 'ã‚µ', romaji: 'sa'}, {kana: 'ã‚·', romaji: 'shi'}, {kana: 'ã‚¹', romaji: 'su'}, {kana: 'ã‚»', romaji: 'se'}, {kana: 'ã‚½', romaji: 'so'}, {kana: 'ã‚¿', romaji: 'ta'}, {kana: 'ãƒ', romaji: 'chi'}, {kana: 'ãƒ„', romaji: 'tsu'}, {kana: 'ãƒ†', romaji: 'te'}, {kana: 'ãƒˆ', romaji: 'to'}, {kana: 'ãƒŠ', romaji: 'na'}, {kana: 'ãƒ‹', romaji: 'ni'}, {kana: 'ãƒŒ', romaji: 'nu'}, {kana: 'ãƒ', romaji: 'ne'}, {kana: 'ãƒ', romaji: 'no'}, {kana: 'ãƒ', romaji: 'ha'}, {kana: 'ãƒ’', romaji: 'hi'}, {kana: 'ãƒ•', romaji: 'fu'}, {kana: 'ãƒ˜', romaji: 'he'}, {kana: 'ãƒ›', romaji: 'ho'}, {kana: 'ãƒ', romaji: 'ma'}, {kana: 'ãƒŸ', romaji: 'mi'}, {kana: 'ãƒ ', romaji: 'mu'}, {kana: 'ãƒ¡', romaji: 'me'}, {kana: 'ãƒ¢', romaji: 'mo'}, {kana: 'ãƒ¤', romaji: 'ya'}, {kana: 'ãƒ¦', romaji: 'yu'}, {kana: 'ãƒ¨', romaji: 'yo'}, {kana: 'ãƒ©', romaji: 'ra'}, {kana: 'ãƒª', romaji: 'ri'}, {kana: 'ãƒ«', romaji: 'ru'}, {kana: 'ãƒ¬', romaji: 're'}, {kana: 'ãƒ­', romaji: 'ro'}, {kana: 'ãƒ¯', romaji: 'wa'}, {kana: 'ãƒ²', romaji: 'wo'}, {kana: 'ãƒ³', romaji: 'n'} ], "Diacritics (æ¿ç‚¹/åŠæ¿ç‚¹)": [ {kana: 'ã‚¬', romaji: 'ga'}, {kana: 'ã‚®', romaji: 'gi'}, {kana: 'ã‚°', romaji: 'gu'}, {kana: 'ã‚²', romaji: 'ge'}, {kana: 'ã‚´', romaji: 'go'}, {kana: 'ã‚¶', romaji: 'za'}, {kana: 'ã‚¸', romaji: 'ji'}, {kana: 'ã‚º', romaji: 'zu'}, {kana: 'ã‚¼', romaji: 'ze'}, {kana: 'ã‚¾', romaji: 'zo'}, {kana: 'ãƒ€', romaji: 'da'}, {kana: 'ãƒ‚', romaji: 'ji'}, {kana: 'ãƒ…', romaji: 'zu'}, {kana: 'ãƒ‡', romaji: 'de'}, {kana: 'ãƒ‰', romaji: 'do'}, {kana: 'ãƒ', romaji: 'ba'}, {kana: 'ãƒ“', romaji: 'bi'}, {kana: 'ãƒ–', romaji: 'bu'}, {kana: 'ãƒ™', romaji: 'be'}, {kana: 'ãƒœ', romaji: 'bo'}, {kana: 'ãƒ‘', romaji: 'pa'}, {kana: 'ãƒ”', romaji: 'pi'}, {kana: 'ãƒ—', romaji: 'pu'}, {kana: 'ãƒš', romaji: 'pe'}, {kana: 'ãƒ', romaji: 'po'} ], "Digraphs (æ‹—éŸ³)": [ {kana: 'ã‚­ãƒ£', romaji: 'kya'}, {kana: 'ã‚­ãƒ¥', romaji: 'kyu'}, {kana: 'ã‚­ãƒ§', romaji: 'kyo'}, {kana: 'ã‚·ãƒ£', romaji: 'sha'}, {kana: 'ã‚·ãƒ¥', romaji: 'shu'}, {kana: 'ã‚·ãƒ§', romaji: 'sho'}, {kana: 'ãƒãƒ£', romaji: 'cha'}, {kana: 'ãƒãƒ¥', romaji: 'chu'}, {kana: 'ãƒãƒ§', romaji: 'cho'}, {kana: 'ãƒ‹ãƒ£', romaji: 'nya'}, {kana: 'ãƒ‹ãƒ¥', romaji: 'nyu'}, {kana: 'ãƒ‹ãƒ§', romaji: 'nyo'}, {kana: 'ãƒ’ãƒ£', romaji: 'hya'}, {kana: 'ãƒ’ãƒ¥', romaji: 'hyu'}, {kana: 'ãƒ’ãƒ§', romaji: 'hyo'}, {kana: 'ãƒŸãƒ£', romaji: 'mya'}, {kana: 'ãƒŸãƒ¥', romaji: 'myu'}, {kana: 'ãƒŸãƒ§', romaji: 'myo'}, {kana: 'ãƒªãƒ£', romaji: 'rya'}, {kana: 'ãƒªãƒ¥', romaji: 'ryu'}, {kana: 'ãƒªãƒ§', romaji: 'ryo'}, {kana: 'ã‚®ãƒ£', romaji: 'gya'}, {kana: 'ã‚®ãƒ¥', romaji: 'gyu'}, {kana: 'ã‚®ãƒ§', romaji: 'gyo'}, {kana: 'ã‚¸ãƒ£', romaji: 'ja'}, {kana: 'ã‚¸ãƒ¥', romaji: 'ju'}, {kana: 'ã‚¸ãƒ§', romaji: 'jo'}, {kana: 'ãƒ“ãƒ£', romaji: 'bya'}, {kana: 'ãƒ“ãƒ¥', romaji: 'byu'}, {kana: 'ãƒ“ãƒ§', romaji: 'byo'}, {kana: 'ãƒ”ãƒ£', romaji: 'pya'}, {kana: 'ãƒ”ãƒ¥', romaji: 'pyu'}, {kana: 'ãƒ”ãƒ§', romaji: 'pyo'} ] };
const kanjiData = {
    "Numbers ğŸ”¢": [
        { id: 'k1', kanji: 'ä¸€', onyomi: 'ã‚¤ãƒ, ã‚¤ãƒ„', kunyomi: 'ã²ã¨', meaning: 'One' },
        { id: 'k2', kanji: 'äºŒ', onyomi: 'ãƒ‹', kunyomi: 'ãµãŸ', meaning: 'Two' },
        { id: 'k3', kanji: 'ä¸‰', onyomi: 'ã‚µãƒ³', kunyomi: 'ã¿', meaning: 'Three' },
        { id: 'k4', kanji: 'å››', onyomi: 'ã‚·', kunyomi: 'ã‚ˆã‚“, ã‚ˆ', meaning: 'Four' },
        { id: 'k5', kanji: 'äº”', onyomi: 'ã‚´', kunyomi: 'ã„ã¤', meaning: 'Five' },
        { id: 'k6', kanji: 'å…­', onyomi: 'ãƒ­ã‚¯', kunyomi: 'ã‚€', meaning: 'Six' },
        { id: 'k7', kanji: 'ä¸ƒ', onyomi: 'ã‚·ãƒ', kunyomi: 'ãªãª', meaning: 'Seven' },
        { id: 'k8', kanji: 'å…«', onyomi: 'ãƒãƒ', kunyomi: 'ã‚„', meaning: 'Eight' },
        { id: 'k9', kanji: 'ä¹', onyomi: 'ã‚­ãƒ¥ã‚¦, ã‚¯', kunyomi: 'ã“ã“ã®', meaning: 'Nine' },
        { id: 'k10', kanji: 'å', onyomi: 'ã‚¸ãƒ¥ã‚¦', kunyomi: 'ã¨ãŠ', meaning: 'Ten' },
        { id: 'k11', kanji: 'ç™¾', onyomi: 'ãƒ’ãƒ£ã‚¯', kunyomi: 'ã‚‚ã‚‚', meaning: 'Hundred' },
        { id: 'k12', kanji: 'åƒ', onyomi: 'ã‚»ãƒ³', kunyomi: 'ã¡', meaning: 'Thousand' },
        { id: 'k13', kanji: 'ä¸‡', onyomi: 'ãƒãƒ³', kunyomi: 'ã‚ˆã‚ãš', meaning: 'Ten Thousand' },
        { id: 'k14', kanji: 'å††', onyomi: 'ã‚¨ãƒ³', kunyomi: 'ã¾ã‚‹ã„', meaning: 'Yen, Circle' }
    ],
    "Time & Calendar ğŸ—“ï¸": [
        { id: 'k15', kanji: 'æ—¥', onyomi: 'ãƒ‹ãƒ, ã‚¸ãƒ„', kunyomi: 'ã², -ã³, -ã‹', meaning: 'Day, Sun' },
        { id: 'k16', kanji: 'æœˆ', onyomi: 'ã‚²ãƒ„, ã‚¬ãƒ„', kunyomi: 'ã¤ã', meaning: 'Month, Moon' },
        { id: 'k17', kanji: 'ç«', onyomi: 'ã‚«', kunyomi: 'ã², -ã³', meaning: 'Fire' },
        { id: 'k18', kanji: 'æ°´', onyomi: 'ã‚¹ã‚¤', kunyomi: 'ã¿ãš', meaning: 'Water' },
        { id: 'k19', kanji: 'æœ¨', onyomi: 'ãƒ¢ã‚¯, ãƒœã‚¯', kunyomi: 'ã', meaning: 'Tree, Wood' },
        { id: 'k20', kanji: 'é‡‘', onyomi: 'ã‚­ãƒ³', kunyomi: 'ã‹ã­', meaning: 'Gold, Money' },
        { id: 'k21', kanji: 'åœŸ', onyomi: 'ãƒ‰, ãƒˆ', kunyomi: 'ã¤ã¡', meaning: 'Soil, Earth' },
        { id: 'k22', kanji: 'å¹´', onyomi: 'ãƒãƒ³', kunyomi: 'ã¨ã—', meaning: 'Year' },
        { id: 'k23', kanji: 'æ¯', onyomi: 'ãƒã‚¤', kunyomi: 'ã”ã¨', meaning: 'Every' },
        { id: 'k24', kanji: 'æ™‚', onyomi: 'ã‚¸', kunyomi: 'ã¨ã', meaning: 'Time, Hour' },
        { id: 'k25', kanji: 'é–“', onyomi: 'ã‚«ãƒ³, ã‚±ãƒ³', kunyomi: 'ã‚ã„ã , ã¾', meaning: 'Interval, Between' },
        { id: 'k26', kanji: 'åˆ†', onyomi: 'ãƒ•ãƒ³, ãƒ–ãƒ³, ãƒ—ãƒ³', kunyomi: 'ã‚ã‘ã‚‹', meaning: 'Minute, Part' },
        { id: 'k27', kanji: 'åŠ', onyomi: 'ãƒãƒ³', kunyomi: 'ãªã‹ã°', meaning: 'Half' },
        { id: 'k28', kanji: 'åˆ', onyomi: 'ã‚´', kunyomi: 'ã†ã¾', meaning: 'Noon' },
        { id: 'k29', kanji: 'ä»Š', onyomi: 'ã‚³ãƒ³, ã‚­ãƒ³', kunyomi: 'ã„ã¾', meaning: 'Now' },
        { id: 'k30', kanji: 'é€±', onyomi: 'ã‚·ãƒ¥ã‚¦', kunyomi: '', meaning: 'Week' },
        { id: 'k31', kanji: 'æ›œ', onyomi: 'ãƒ¨ã‚¦', kunyomi: '', meaning: 'Day of the week' }
    ],
    "People & Family ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦": [
        { id: 'k32', kanji: 'äºº', onyomi: 'ã‚¸ãƒ³, ãƒ‹ãƒ³', kunyomi: 'ã²ã¨', meaning: 'Person' },
        { id: 'k33', kanji: 'å­', onyomi: 'ã‚·, ã‚¹', kunyomi: 'ã“', meaning: 'Child' },
        { id: 'k34', kanji: 'å¥³', onyomi: 'ã‚¸ãƒ§, ãƒ‹ãƒ§', kunyomi: 'ãŠã‚“ãª', meaning: 'Woman' },
        { id: 'k35', kanji: 'ç”·', onyomi: 'ãƒ€ãƒ³, ãƒŠãƒ³', kunyomi: 'ãŠã¨ã“', meaning: 'Man' },
        { id: 'k36', kanji: 'çˆ¶', onyomi: 'ãƒ•', kunyomi: 'ã¡ã¡', meaning: 'Father' },
        { id: 'k37', kanji: 'æ¯', onyomi: 'ãƒœ', kunyomi: 'ã¯ã¯', meaning: 'Mother' },
        { id: 'k38', kanji: 'å‹', onyomi: 'ãƒ¦ã‚¦', kunyomi: 'ã¨ã‚‚', meaning: 'Friend' },
        { id: 'k39', kanji: 'å…ˆ', onyomi: 'ã‚»ãƒ³', kunyomi: 'ã•ã', meaning: 'Ahead, Previous' },
        { id: 'k40', kanji: 'ç”Ÿ', onyomi: 'ã‚»ã‚¤, ã‚·ãƒ§ã‚¦', kunyomi: 'ã†ã¾ã‚Œã‚‹, ã„ãã‚‹, ãªã¾', meaning: 'Life, Birth' },
        { id: 'k41', kanji: 'ç§', onyomi: 'ã‚·', kunyomi: 'ã‚ãŸã—', meaning: 'I, Private' },
        { id: 'k42', kanji: 'å…„', onyomi: 'ã‚±ã‚¤, ã‚­ãƒ§ã‚¦', kunyomi: 'ã‚ã«', meaning: 'Older Brother' },
        { id: 'k43', kanji: 'å§‰', onyomi: 'ã‚·', kunyomi: 'ã‚ã­', meaning: 'Older Sister' },
        { id: 'k44', kanji: 'å¼Ÿ', onyomi: 'ãƒ†ã‚¤, ãƒ€ã‚¤', kunyomi: 'ãŠã¨ã†ã¨', meaning: 'Younger Brother' },
        { id: 'k45', kanji: 'å¦¹', onyomi: 'ãƒã‚¤', kunyomi: 'ã„ã‚‚ã†ã¨', meaning: 'Younger Sister' }
    ],
    "Body Parts ğŸ’ª": [
        { id: 'k47', kanji: 'ç›®', onyomi: 'ãƒ¢ã‚¯', kunyomi: 'ã‚', meaning: 'Eye' },
        { id: 'k48', kanji: 'å£', onyomi: 'ã‚³ã‚¦', kunyomi: 'ãã¡', meaning: 'Mouth' },
        { id: 'k49', kanji: 'è€³', onyomi: 'ã‚¸', kunyomi: 'ã¿ã¿', meaning: 'Ear' },
        { id: 'k50', kanji: 'æ‰‹', onyomi: 'ã‚·ãƒ¥', kunyomi: 'ã¦', meaning: 'Hand' },
        { id: 'k51', kanji: 'è¶³', onyomi: 'ã‚½ã‚¯', kunyomi: 'ã‚ã—', meaning: 'Leg, Foot' }
    ],
    "Basic Verbs ğŸƒ": [
        { id: 'k52', kanji: 'è¦‹', onyomi: 'ã‚±ãƒ³', kunyomi: 'ã¿ã‚‹', meaning: 'See, Look' },
        { id: 'k53', kanji: 'è', onyomi: 'ãƒ–ãƒ³, ãƒ¢ãƒ³', kunyomi: 'ãã', meaning: 'Hear, Ask' },
        { id: 'k54', kanji: 'è¨€', onyomi: 'ã‚²ãƒ³, ã‚´ãƒ³', kunyomi: 'ã„ã†', meaning: 'Say' },
        { id: 'k55', kanji: 'è©±', onyomi: 'ãƒ¯', kunyomi: 'ã¯ãªã™', meaning: 'Speak, Talk' },
        { id: 'k56', kanji: 'é£Ÿ', onyomi: 'ã‚·ãƒ§ã‚¯', kunyomi: 'ãŸã¹ã‚‹', meaning: 'Eat' },
        { id: 'k57', kanji: 'é£²', onyomi: 'ã‚¤ãƒ³', kunyomi: 'ã®ã‚€', meaning: 'Drink' },
        { id: 'k58', kanji: 'è²·', onyomi: 'ãƒã‚¤', kunyomi: 'ã‹ã†', meaning: 'Buy' },
        { id: 'k59', kanji: 'è¡Œ', onyomi: 'ã‚³ã‚¦, ã‚®ãƒ§ã‚¦', kunyomi: 'ã„ã', meaning: 'Go' },
        { id: 'k60', kanji: 'æ¥', onyomi: 'ãƒ©ã‚¤', kunyomi: 'ãã‚‹', meaning: 'Come' },
        { id: 'k61', kanji: 'å¸°', onyomi: 'ã‚­', kunyomi: 'ã‹ãˆã‚‹', meaning: 'Return' },
        { id: 'k62', kanji: 'ä¼‘', onyomi: 'ã‚­ãƒ¥ã‚¦', kunyomi: 'ã‚„ã™ã‚€', meaning: 'Rest' },
        { id: 'k63', kanji: 'å­¦', onyomi: 'ã‚¬ã‚¯', kunyomi: 'ã¾ãªã¶', meaning: 'Study, Learn' },
        { id: 'k64', kanji: 'èª­', onyomi: 'ãƒ‰ã‚¯', kunyomi: 'ã‚ˆã‚€', meaning: 'Read' },
        { id: 'k65', kanji: 'æ›¸', onyomi: 'ã‚·ãƒ§', kunyomi: 'ã‹ã', meaning: 'Write' },
        { id: 'k66', kanji: 'ä¼š', onyomi: 'ã‚«ã‚¤', kunyomi: 'ã‚ã†', meaning: 'Meet' },
        { id: 'k67', kanji: 'å‡º', onyomi: 'ã‚·ãƒ¥ãƒ„', kunyomi: 'ã§ã‚‹, ã ã™', meaning: 'Go out, Put out' },
        { id: 'k68', kanji: 'å…¥', onyomi: 'ãƒ‹ãƒ¥ã‚¦', kunyomi: 'ã¯ã„ã‚‹, ã„ã‚Œã‚‹', meaning: 'Enter, Put in' },
        { id: 'k69', kanji: 'ç«‹', onyomi: 'ãƒªãƒ„', kunyomi: 'ãŸã¤', meaning: 'Stand' },
        { id: 'k70', kanji: 'çŸ¥', onyomi: 'ãƒ', kunyomi: 'ã—ã‚‹', meaning: 'Know' },
        { id: 'k71', kanji: 'æ€', onyomi: 'ã‚·', kunyomi: 'ãŠã‚‚ã†', meaning: 'Think' },
        { id: 'k72', kanji: 'ä½œ', onyomi: 'ã‚µã‚¯, ã‚µ', kunyomi: 'ã¤ãã‚‹', meaning: 'Make' },
        { id: 'k73', kanji: 'ä½¿', onyomi: 'ã‚·', kunyomi: 'ã¤ã‹ã†', meaning: 'Use' },
        { id: 'k74', kanji: 'æŒ', onyomi: 'ã‚¸', kunyomi: 'ã‚‚ã¤', meaning: 'Hold, Have' },
        { id: 'k75', kanji: 'å¾…', onyomi: 'ã‚¿ã‚¤', kunyomi: 'ã¾ã¤', meaning: 'Wait' },
        { id: 'k76', kanji: 'ä½', onyomi: 'ã‚¸ãƒ¥ã‚¦', kunyomi: 'ã™ã‚€', meaning: 'Live' },
        { id: 'k77', kanji: 'å£²', onyomi: 'ãƒã‚¤', kunyomi: 'ã†ã‚‹', meaning: 'Sell' },
        { id: 'k78', kanji: 'æ•™', onyomi: 'ã‚­ãƒ§ã‚¦', kunyomi: 'ãŠã—ãˆã‚‹', meaning: 'Teach' },
        { id: 'k79', kanji: 'å‹‰', onyomi: 'ãƒ™ãƒ³', kunyomi: 'ã¤ã¨ã‚ã‚‹', meaning: 'Strive' },
        { id: 'k80', kanji: 'å¼·', onyomi: 'ã‚­ãƒ§ã‚¦', kunyomi: 'ã¤ã‚ˆã„', meaning: 'Strong' }
    ],
    "Basic Adjectives âœ¨": [
        { id: 'k81', kanji: 'å¤§', onyomi: 'ãƒ€ã‚¤, ã‚¿ã‚¤', kunyomi: 'ãŠãŠãã„', meaning: 'Big' },
        { id: 'k82', kanji: 'å°', onyomi: 'ã‚·ãƒ§ã‚¦', kunyomi: 'ã¡ã„ã•ã„', meaning: 'Small' },
        { id: 'k83', kanji: 'é«˜', onyomi: 'ã‚³ã‚¦', kunyomi: 'ãŸã‹ã„', meaning: 'High, Expensive' },
        { id: 'k84', kanji: 'å®‰', onyomi: 'ã‚¢ãƒ³', kunyomi: 'ã‚„ã™ã„', meaning: 'Cheap, Safe' },
        { id: 'k85', kanji: 'æ–°', onyomi: 'ã‚·ãƒ³', kunyomi: 'ã‚ãŸã‚‰ã—ã„', meaning: 'New' },
        { id: 'k86', kanji: 'å¤', onyomi: 'ã‚³', kunyomi: 'ãµã‚‹ã„', meaning: 'Old' },
        { id: 'k87', kanji: 'é•·', onyomi: 'ãƒãƒ§ã‚¦', kunyomi: 'ãªãŒã„', meaning: 'Long' },
        { id: 'k88', kanji: 'å¤š', onyomi: 'ã‚¿', kunyomi: 'ãŠãŠã„', meaning: 'Many, Much' },
        { id: 'k89', kanji: 'å°‘', onyomi: 'ã‚·ãƒ§ã‚¦', kunyomi: 'ã™ããªã„, ã™ã“ã—', meaning: 'Few, A little' },
        { id: 'k90', kanji: 'ç™½', onyomi: 'ãƒã‚¯', kunyomi: 'ã—ã‚ã„', meaning: 'White' },
        { id: 'k91', kanji: 'èµ¤', onyomi: 'ã‚»ã‚­', kunyomi: 'ã‚ã‹ã„', meaning: 'Red' },
        { id: 'k92', kanji: 'é’', onyomi: 'ã‚»ã‚¤', kunyomi: 'ã‚ãŠã„', meaning: 'Blue' },
        { id: 'k93', kanji: 'æ—©', onyomi: 'ã‚½ã‚¦', kunyomi: 'ã¯ã‚„ã„', meaning: 'Early, Fast' },
        { id: 'k94', kanji: 'æ˜', onyomi: 'ãƒ¡ã‚¤', kunyomi: 'ã‚ã‹ã‚‹ã„', meaning: 'Bright' },
        { id: 'k95', kanji: 'å¥½', onyomi: 'ã‚³ã‚¦', kunyomi: 'ã™ã', meaning: 'Like' },
        { id: 'k96', kanji: 'å…ƒ', onyomi: 'ã‚²ãƒ³, ã‚¬ãƒ³', kunyomi: 'ã‚‚ã¨', meaning: 'Origin, Healthy' },
        { id: 'k97', kanji: 'è¿‘', onyomi: 'ã‚­ãƒ³', kunyomi: 'ã¡ã‹ã„', meaning: 'Near' },
        { id: 'k98', kanji: 'é ', onyomi: 'ã‚¨ãƒ³', kunyomi: 'ã¨ãŠã„', meaning: 'Far' }
    ],
    "Places & Directions ğŸ—ºï¸": [
        { id: 'k99', kanji: 'ä¸Š', onyomi: 'ã‚¸ãƒ§ã‚¦', kunyomi: 'ã†ãˆ', meaning: 'Up, Above' },
        { id: 'k100', kanji: 'ä¸‹', onyomi: 'ã‚«, ã‚²', kunyomi: 'ã—ãŸ', meaning: 'Down, Below' },
        { id: 'k101', kanji: 'ä¸­', onyomi: 'ãƒãƒ¥ã‚¦', kunyomi: 'ãªã‹', meaning: 'Middle, In' },
        { id: 'k102', kanji: 'å¤–', onyomi: 'ã‚¬ã‚¤, ã‚²', kunyomi: 'ãã¨', meaning: 'Outside' },
        { id: 'k103', kanji: 'å³', onyomi: 'ã‚¦, ãƒ¦ã‚¦', kunyomi: 'ã¿ã', meaning: 'Right' },
        { id: 'k104', kanji: 'å·¦', onyomi: 'ã‚µ', kunyomi: 'ã²ã ã‚Š', meaning: 'Left' },
        { id: 'k105', kanji: 'æ±', onyomi: 'ãƒˆã‚¦', kunyomi: 'ã²ãŒã—', meaning: 'East' },
        { id: 'k106', kanji: 'è¥¿', onyomi: 'ã‚»ã‚¤, ã‚µã‚¤', kunyomi: 'ã«ã—', meaning: 'West' },
        { id: 'k107', kanji: 'å—', onyomi: 'ãƒŠãƒ³', kunyomi: 'ã¿ãªã¿', meaning: 'South' },
        { id: 'k108', kanji: 'åŒ—', onyomi: 'ãƒ›ã‚¯', kunyomi: 'ããŸ', meaning: 'North' },
        { id: 'k109', kanji: 'å‰', onyomi: 'ã‚¼ãƒ³', kunyomi: 'ã¾ãˆ', meaning: 'Before, Front' },
        { id: 'k110', kanji: 'å¾Œ', onyomi: 'ã‚´, ã‚³ã‚¦', kunyomi: 'ã†ã—ã‚, ã‚ã¨', meaning: 'After, Back' },
        { id: 'k111', kanji: 'æ ¡', onyomi: 'ã‚³ã‚¦', kunyomi: '', meaning: 'School' },
        { id: 'k112', kanji: 'åº—', onyomi: 'ãƒ†ãƒ³', kunyomi: 'ã¿ã›', meaning: 'Shop' },
        { id: 'k113', kanji: 'é§…', onyomi: 'ã‚¨ã‚­', kunyomi: '', meaning: 'Station' },
        { id: 'k114', kanji: 'é“', onyomi: 'ãƒ‰ã‚¦', kunyomi: 'ã¿ã¡', meaning: 'Road' },
        { id: 'k115', kanji: 'å›½', onyomi: 'ã‚³ã‚¯', kunyomi: 'ãã«', meaning: 'Country' },
        { id: 'k116', kanji: 'ç¤¾', onyomi: 'ã‚·ãƒ£', kunyomi: 'ã‚„ã—ã‚', meaning: 'Company, Shrine' },
        { id: 'k117', kanji: 'å®¶', onyomi: 'ã‚«, ã‚±', kunyomi: 'ã„ãˆ, ã†ã¡', meaning: 'House' }
    ],
    "Nature & Objects ğŸŒ³": [
        { id: 'k118', kanji: 'å±±', onyomi: 'ã‚µãƒ³', kunyomi: 'ã‚„ã¾', meaning: 'Mountain' },
        { id: 'k119', kanji: 'å·', onyomi: 'ã‚»ãƒ³', kunyomi: 'ã‹ã‚', meaning: 'River' },
        { id: 'k120', kanji: 'èŠ±', onyomi: 'ã‚«', kunyomi: 'ã¯ãª', meaning: 'Flower' },
        { id: 'k121', kanji: 'é›¨', onyomi: 'ã‚¦', kunyomi: 'ã‚ã‚', meaning: 'Rain' },
        { id: 'k122', kanji: 'ç©º', onyomi: 'ã‚¯ã‚¦', kunyomi: 'ãã‚‰', meaning: 'Sky' },
        { id: 'k123', kanji: 'å¤©', onyomi: 'ãƒ†ãƒ³', kunyomi: 'ã‚ã¾', meaning: 'Heaven' },
        { id: 'k124', kanji: 'æ°—', onyomi: 'ã‚­, ã‚±', kunyomi: 'ã„ã', meaning: 'Spirit, Air' },
        { id: 'k125', kanji: 'é›»', onyomi: 'ãƒ‡ãƒ³', kunyomi: '', meaning: 'Electricity' },
        { id: 'k126', kanji: 'è»Š', onyomi: 'ã‚·ãƒ£', kunyomi: 'ãã‚‹ã¾', meaning: 'Car, Vehicle' },
        { id: 'k127', kanji: 'é­š', onyomi: 'ã‚®ãƒ§', kunyomi: 'ã•ã‹ãª', meaning: 'Fish' },
        { id: 'k128', kanji: 'è‚‰', onyomi: 'ãƒ‹ã‚¯', kunyomi: 'ã—ã—', meaning: 'Meat' },
        { id: 'k129', kanji: 'èŒ¶', onyomi: 'ãƒãƒ£, ã‚µ', kunyomi: 'ãŸ', meaning: 'Tea' },
        { id: 'k130', kanji: 'çŠ¬', onyomi: 'ã‚±ãƒ³', kunyomi: 'ã„ã¬', meaning: 'Dog' },
        { id: 'k131', kanji: 'æœ¬', onyomi: 'ãƒ›ãƒ³', kunyomi: 'ã‚‚ã¨', meaning: 'Book, Origin' },
        { id: 'k132', kanji: 'å', onyomi: 'ãƒ¡ã‚¤, ãƒŸãƒ§ã‚¦', kunyomi: 'ãª', meaning: 'Name' },
        { id: 'k133', kanji: 'è‹±', onyomi: 'ã‚¨ã‚¤', kunyomi: '', meaning: 'England, English' },
        { id: 'k134', kanji: 'èª', onyomi: 'ã‚´', kunyomi: 'ã‹ãŸã‚‹', meaning: 'Language, Word' }
    ]
};
const vocabData = [ { id: 'v1', word: 'ã‚ãŸã—', reading: 'watashi', meaning: 'I, me' }, { id: 'v2', word: 'ã‚ãªãŸ', reading: 'anata', meaning: 'you' }, { id: 'v3', word: 'ã“ã‚Œ', reading: 'kore', meaning: 'this' }, { id: 'v4', word: 'ãã‚Œ', reading: 'sore', meaning: 'that' }, { id: 'v5', word: 'ã‚ã‚Œ', reading: 'are', meaning: 'that over there' }, { id: 'v6', word: 'ãŒã£ã“ã†', reading: 'gakkou', meaning: 'school' }, { id: 'v7', word: 'ã›ã‚“ã›ã„', reading: 'sensei', meaning: 'teacher' }, { id: 'v8', word: 'ãŒãã›ã„', reading: 'gakusei', meaning: 'student' }, { id: 'v9', word: 'ã»ã‚“', reading: 'hon', meaning: 'book' }, { id: 'v10', word: 'ãˆã‚“ã´ã¤', reading: 'enpitsu', meaning: 'pencil' }, { id: 'v11', word: 'ã¨ã‘ã„', reading: 'tokei', meaning: 'clock, watch' }, { id: 'v12', word: 'ã‹ã•', reading: 'kasa', meaning: 'umbrella' }, { id: 'v13', word: 'ã¤ããˆ', reading: 'tsukue', meaning: 'desk' }, { id: 'v14', word: 'ã„ã™', reading: 'isu', meaning: 'chair' }, { id: 'v15', word: 'ãŸã¹ã¾ã™', reading: 'tabemasu', meaning: 'to eat' }, { id: 'v16', word: 'ã®ã¿ã¾ã™', reading: 'nomimasu', meaning: 'to drink' }, { id: 'v17', word: 'ã„ãã¾ã™', reading: 'ikimasu', meaning: 'to go' }, { id: 'v18', word: 'ãã¾ã™', reading: 'kimasu', meaning: 'to come' }, { id: 'v19', word: 'ã‹ãˆã‚Šã¾ã™', reading: 'kaerimasu', meaning: 'to return' }, { id: 'v20', word: 'ã¿ã¾ã™', reading: 'mimasu', meaning: 'to see, watch' }, { id: 'v21', word: 'ããã¾ã™', reading: 'kikimasu', meaning: 'to listen, ask' }, { id: 'v22', word: 'ã‚ˆã¿ã¾ã™', reading: 'yomimasu', meaning: 'to read' }, { id: 'v23', word: 'ã‹ãã¾ã™', reading: 'kakimasu', meaning: 'to write' }, { id: 'v24', word: 'ã‹ã„ã¾ã™', reading: 'kaimasu', meaning: 'to buy' }, { id: 'v25', word: 'ã¯ãªã—ã¾ã™', reading: 'hanashimasu', meaning: 'to speak'}, { id: 'v26', word: 'ã¹ã‚“ãã‚‡ã†ã—ã¾ã™', reading: 'benkyou shimasu', meaning: 'to study'}, { id: 'v27', word: 'ã‚ã‚Šã¾ã™', reading: 'arimasu', meaning: 'to exist (inanimate)'}, { id: 'v28', word: 'ã„ã¾ã™', reading: 'imasu', meaning: 'to exist (animate)'}, { id: 'v29', word: 'ãŠã¯ã‚ˆã†', reading: 'ohayou', meaning: 'good morning' }, { id: 'v30', word: 'ã“ã‚“ã«ã¡ã¯', reading: 'konnichiwa', meaning: 'hello' }, { id: 'v31', word: 'ã“ã‚“ã°ã‚“ã¯', reading: 'konbanwa', meaning: 'good evening' }, { id: 'v32', word: 'ã•ã‚ˆã†ãªã‚‰', reading: 'sayounara', meaning: 'goodbye' }, { id: 'v33', word: 'ãŠã‚„ã™ã¿', reading: 'oyasumi', meaning: 'good night' }, { id: 'v34', word: 'ã‚ã‚ŠãŒã¨ã†', reading: 'arigatou', meaning: 'thank you' }, { id: 'v35', word: 'ã™ã¿ã¾ã›ã‚“', reading: 'sumimasen', meaning: 'excuse me' }, { id: 'v36', word: 'ãŠãŠãã„', reading: 'ookii', meaning: 'big' }, { id: 'v37', word: 'ã¡ã„ã•ã„', reading: 'chiisai', meaning: 'small' }, { id: 'v38', word: 'ã‚ãŸã‚‰ã—ã„', reading: 'atarashii', meaning: 'new' }, { id: 'v39', word: 'ãµã‚‹ã„', reading: 'furui', meaning: 'old' }, { id: 'v40', word: 'ã„ã„', reading: 'ii / yoi', meaning: 'good' }, { id: 'v41', word: 'ã‚ã‚‹ã„', reading: 'warui', meaning: 'bad' }, { id: 'v42', word: 'ãŸã‹ã„', reading: 'takai', meaning: 'expensive, high' }, { id: 'v43', word: 'ã‚„ã™ã„', reading: 'yasui', meaning: 'cheap' }, { id: 'v44', word: 'ãŠã„ã—ã„', reading: 'oishii', meaning: 'delicious' }, { id: 'v45', word: 'ã„ããŒã—ã„', reading: 'isogashii', meaning: 'busy' }, { id: 'v46', word: 'ãŸã®ã—ã„', reading: 'tanoshii', meaning: 'fun' }, { id: 'v47', word: 'ãŠã‚‚ã—ã‚ã„', reading: 'omoshiroi', meaning: 'interesting' }, { id: 'v48', word: 'ã‚€ãšã‹ã—ã„', reading: 'muzukashii', meaning: 'difficult' }, { id: 'v49', word: 'ã‚„ã•ã—ã„', reading: 'yasashii', meaning: 'easy' }, { id: 'v50', word: 'ã‚ã¤ã„', reading: 'atsui', meaning: 'hot (weather/thing)' }, { id: 'v51', word: 'ã•ã‚€ã„', reading: 'samui', meaning: 'cold (weather)' }, { id: 'v52', word: 'ã¤ã‚ãŸã„', reading: 'tsumetai', meaning: 'cold (to touch)' }, { id: 'v53', word: 'ãã‚Œã„', reading: 'kirei', meaning: 'beautiful, clean' }, { id: 'v54', word: 'ã’ã‚“ã', reading: 'genki', meaning: 'healthy, lively' }, { id: 'v55', word: 'ã—ãšã‹', reading: 'shizuka', meaning: 'quiet' }, { id: 'v56', word: 'ã«ãã‚„ã‹', reading: 'nigiyaka', meaning: 'bustling, lively' }, { id: 'v57', word: 'ã‹ãã', reading: 'kazoku', meaning: 'family' }, { id: 'v58', word: 'ãˆã„ãŒ', reading: 'eiga', meaning: 'movie' }, { id: 'v59', word: 'ãŠã‚“ãŒã', reading: 'ongaku', meaning: 'music' }, { id: 'v60', word: 'ã‚¹ãƒãƒ¼ãƒ„', reading: 'supootsu', meaning: 'sports' } ];
const grammarData = [ { title: 'Aã¯ Bã§ã™ (A is B)', content: 'This is the most basic sentence structure. It identifies A as B.<br><b>Example:</b> ã‚ãŸã—ã¯ã€€ãŒãã›ã„ã§ã™ã€‚ (Watashi wa gakusei desu.) - I am a student.' }, { title: 'Particles: ã¯, ãŒ, ã‚’, ã®, ã‚‚', content: '<b>ã¯ (wa)</b>: topic marker. <b>ãŒ (ga)</b>: subject marker. <b>ã‚’ (o)</b>: object marker. <b>ã® (no)</b>: possessive marker. <b>ã‚‚ (mo)</b>: "also", "too".<br><b>Example (ã‚‚):</b> ã‚„ã¾ã ã•ã‚“ã‚‚ã€€ãŒãã›ã„ã§ã™ã€‚(Yamada-san mo gakusei desu.) - Mr. Yamada is also a student.'}, { title: 'Particles: ã«, ã¸, ã§ (Location/Time)', content: '<b>ã« (ni)</b>: Marks a specific time (e.g., ï¼–æ™‚ã«), a destination (e.g., ãŒã£ã“ã†ã«ã€€ã„ãã¾ã™), or existence (e.g., ã¤ããˆã®ã†ãˆã«ã€€ã‚ã‚Šã¾ã™).<br><b>ã¸ (e)</b>: Marks direction of travel (interchangeable with ã« for movement).<br><b>ã§ (de)</b>: Marks the location of an action (e.g., ã¨ã—ã‚‡ã‹ã‚“ã§ã€€ã¹ã‚“ãã‚‡ã†ã—ã¾ã™) or the means (e.g., ã§ã‚“ã—ã‚ƒã§ã€€ã„ãã¾ã™).'}, { title: 'Particles: ã‹ã‚‰, ã¾ã§ (From, Until)', content: 'Used to mark a starting point (ã‹ã‚‰) and an ending point (ã¾ã§) in time or space.<br><b>Example:</b> ãã‚“ã“ã†ã¯ã€€ï¼™ã˜ã‹ã‚‰ã€€ï¼“ã˜ã¾ã§ã§ã™ã€‚(Ginkou wa kuji kara sanji made desu.) - The bank is open from 9:00 to 3:00.'}, { title: 'Verb Conjugation: ã¾ã™/ã¾ã›ã‚“/ã¾ã—ãŸ/ã¾ã›ã‚“ã§ã—ãŸ', content: 'The four basic verb forms. Present Affirmative (ã¾ã™), Present Negative (ã¾ã›ã‚“), Past Affirmative (ã¾ã—ãŸ), Past Negative (ã¾ã›ã‚“ã§ã—ãŸ).<br><b>Example:</b> ãã®ã†ã€ãƒ†ãƒ¬ãƒ“ã‚’ã€€ã¿ã¾ã›ã‚“ã§ã—ãŸã€‚(Kinou, terebi o mimasen deshita.) - I did not watch TV yesterday.' }, { title: 'Place ã« Thing ãŒ ã‚ã‚Šã¾ã™ / ã„ã¾ã™', content: 'Used to say something exists. Use ã‚ã‚Šã¾ã™ (arimasu) for inanimate objects and ã„ã¾ã™ (imasu) for animate things (people, animals).<br><b>Example (inanimate):</b> ã¸ã‚„ã«ã€€ãƒ†ãƒ¬ãƒ“ãŒã€€ã‚ã‚Šã¾ã™ã€‚(Heya ni terebi ga arimasu.) - There is a TV in the room.<br><b>Example (animate):</b> ã“ã†ãˆã‚“ã«ã€€ã“ã©ã‚‚ãŒã€€ã„ã¾ã™ã€‚(Kouen ni kodomo ga imasu.) - There are children in the park.'}, { title: 'Adjective Conjugation', content: '<b>ã„-adjectives:</b> Negative (ããªã„), Past (ã‹ã£ãŸ), Past Negative (ããªã‹ã£ãŸ).<br><b>ãª-adjectives:</b> Use with ã§ã™. Negative (ã˜ã‚ƒãªã„ã§ã™), Past (ã§ã—ãŸ), Past Negative (ã˜ã‚ƒãªã‹ã£ãŸã§ã™).<br><b>Example (ã„-adj):</b> ãã®ã†ã¯ã€€ã‚ã¤ã‹ã£ãŸã§ã™ã€‚(Kinou wa atsukatta desu.) - Yesterday was hot.<br><b>Example (ãª-adj):</b> ã“ã®ã¸ã‚„ã¯ã€€ã—ãšã‹ã˜ã‚ƒãªã„ã§ã™ã€‚(Kono heya wa shizuka janai desu.) - This room is not quiet.'}, { title: 'Verb Te-form + ãã ã•ã„ (Please do)', content: 'A polite request. You must learn Te-form conjugation rules for different verb groups.<br><b>Example:</b> ã¡ã‚‡ã£ã¨ã€€ã¾ã£ã¦ã€€ãã ã•ã„ã€‚(Chotto matte kudasai.) - Please wait a moment.'} ];
const readingPassages = [ { id: 'reading1', title: 'èª­è§£ç·´ç¿’ 1: ç”°ä¸­ã•ã‚“ã®æ—¥', passage: 'ã‚ãŸã—ã¯ã€€ãŸãªã‹ã§ã™ã€‚ã¾ã„ã«ã¡ã€€ã—ã¡ã˜ã«ã€€ãŠãã¾ã™ã€‚ã‚ã•ã”ã¯ã‚“ã‚’ã€€ãŸã¹ã¾ã™ã€‚ãƒ‘ãƒ³ã¨ã€€ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’ã€€ã®ã¿ã¾ã™ã€‚ã¯ã¡ã˜ã«ã€€ã†ã¡ã‚’ã€€ã§ã¾ã™ã€‚ã§ã‚“ã—ã‚ƒã§ã€€ã‹ã„ã—ã‚ƒã¸ã€€ã„ãã¾ã™ã€‚ã‹ã„ã—ã‚ƒã¯ã€€ãã˜ã‹ã‚‰ã€€ã”ã˜ã¾ã§ã§ã™ã€‚ã—ã”ã¨ã¯ã€€ã„ããŒã—ã„ã§ã™ãŒã€ãŸã®ã—ã„ã§ã™ã€‚<br><br>ã‚ˆã‚‹ã€ã†ã¡ã¸ã€€ã‹ãˆã‚Šã¾ã™ã€‚ã°ã‚“ã”ã¯ã‚“ã‚’ã€€ãŸã¹ã¦ã€ãƒ†ãƒ¬ãƒ“ã‚’ã€€ã¿ã¾ã™ã€‚ã˜ã‚…ã†ã«ã˜ã«ã€€ã­ã¾ã™ã€‚', questions: [ { question: "1. ãŸãªã‹ã•ã‚“ã¯ã€€ãªã‚“ã˜ã«ã€€ãŠãã¾ã™ã‹ã€‚", options: ["ã”ã˜", "ã—ã¡ã˜", "ã¯ã¡ã˜", "ãã˜"], answer: "ã—ã¡ã˜" }, { question: "2. ãªã‚“ã§ã€€ã‹ã„ã—ã‚ƒã¸ã€€ã„ãã¾ã™ã‹ã€‚", options: ["ãƒã‚¹", "ãã‚‹ã¾", "ã˜ã¦ã‚“ã—ã‚ƒ", "ã§ã‚“ã—ã‚ƒ"], answer: "ã§ã‚“ã—ã‚ƒ" } ] }, { id: 'reading2', title: 'èª­è§£ç·´ç¿’ 2: ãã®ã†ã®ä¼‘ã¿', passage: 'ãã®ã†ã¯ã€€ã‚„ã™ã¿ã§ã—ãŸã€‚ã‚ãŸã—ã¯ã€€ã¨ã‚‚ã ã¡ã¨ã€€ãã‚‡ã†ã¨ã¸ã€€ã„ãã¾ã—ãŸã€‚ãã‚‡ã†ã¨ã¯ã€€ãµã‚‹ã„ã¾ã¡ã§ã™ã€‚ãã‚Œã„ãªã€€ãŠã¦ã‚‰ãŒã€€ãŸãã•ã‚“ã€€ã‚ã‚Šã¾ã—ãŸã€‚ã‚ãŸã—ãŸã¡ã¯ã€€ã—ã‚ƒã—ã‚“ã‚’ã€€ãŸãã•ã‚“ã€€ã¨ã‚Šã¾ã—ãŸã€‚ãã‚Œã‹ã‚‰ã€ã‚ãŸã‚‰ã—ã„ã¿ã›ã§ã€€ã²ã‚‹ã”ã¯ã‚“ã‚’ã€€ãŸã¹ã¾ã—ãŸã€‚ã¨ã¦ã‚‚ã€€ãŠã„ã—ã‹ã£ãŸã§ã™ã€‚ã§ã‚‚ã€ã¨ã¦ã‚‚ã€€ã‚ã¤ã‹ã£ãŸã§ã™ã€‚ã‚ˆã‚‹ã€€ã†ã¡ã¸ã€€ã‹ãˆã‚Šã¾ã—ãŸã€‚ã¨ã¦ã‚‚ã€€ãŸã®ã—ã„ã€€ã„ã¡ã«ã¡ã§ã—ãŸã€‚', questions: [ { question: "1. ãã®ã†ã€€ã ã‚Œã¨ã€€ã©ã“ã¸ã€€ã„ãã¾ã—ãŸã‹ã€‚", options: ["ã²ã¨ã‚Šã§ã€€ãªã‚‰ã¸", "ã¨ã‚‚ã ã¡ã¨ã€€ãã‚‡ã†ã¨ã¸", "ã‹ããã¨ã€€ãŠãŠã•ã‹ã¸", "ã¨ã‚‚ã ã¡ã¨ã€€ã¨ã†ãã‚‡ã†ã¸"], answer: "ã¨ã‚‚ã ã¡ã¨ã€€ãã‚‡ã†ã¨ã¸" }, { question: "2. ãã‚‡ã†ã¨ã§ã€€ãªã«ã‚’ã€€ã—ã¾ã—ãŸã‹ã€‚", options: ["ã»ã‚“ã‚’ã€€ã‚ˆã¿ã¾ã—ãŸ", "ãˆã„ãŒã‚’ã€€ã¿ã¾ã—ãŸ", "ã—ã‚ƒã—ã‚“ã‚’ã€€ã¨ã‚Šã¾ã—ãŸ", "ã‹ã„ã‚‚ã®ã‚’ã€€ã—ã¾ã—ãŸ"], answer: "ã—ã‚ƒã—ã‚“ã‚’ã€€ã¨ã‚Šã¾ã—ãŸ" } ] } ];
const listeningData = [ { id: 'listening1', title: 'è´è§£ç·´ç¿’ 1: è²·ã„ç‰©', dialogue: '<b>å¥³ã®äººï¼š</b>ã™ã¿ã¾ã›ã‚“ã€ãã®ãã‚ã„ã‹ã•ã€ã„ãã‚‰ã§ã™ã‹ã€‚<br><b>ç”·ã®äººï¼š</b>ã“ã‚Œã§ã™ã‹ã€‚ã“ã‚Œã¯ã€ã›ã‚“ã«ã²ã‚ƒããˆã‚“ã§ã™ã€‚<br><b>å¥³ã®äººï¼š</b>ã˜ã‚ƒã‚ã€ã“ã‚Œã‚’ãã ã•ã„ã€‚', question: 'å¥³ã®äººã¯ã€€ãªã«ã‚’ã€€ã‹ã„ã¾ã—ãŸã‹ã€‚', options: ["ã—ã‚ã„ã‹ã•", "ãã‚ã„ã‹ã•", "ã‚ãŠã„ã‹ã•", "ã‹ã°ã‚“"], answer: "ãã‚ã„ã‹ã•" }, { id: 'listening2', title: 'è´è§£ç·´ç¿’ 2: æ™‚é–“', dialogue: '<b>ç”·ã®äººï¼š</b>ã„ã¾ã€€ãªã‚“ã˜ã§ã™ã‹ã€‚<br><b>å¥³ã®äººï¼š</b>ãˆãƒ¼ã¨ã€ã”ã˜ã˜ã‚…ã£ã·ã‚“ã§ã™ã€‚<br><b>ç”·ã®äººï¼š</b>ãã†ã§ã™ã‹ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ãˆã„ãŒã¯ã€€ã”ã˜ã¯ã‚“ã‹ã‚‰ã§ã™ã­ã€‚ã„ããã¾ã—ã‚‡ã†ã€‚', question: 'ãˆã„ãŒã¯ã€€ãªã‚“ã˜ã‹ã‚‰ã§ã™ã‹ã€‚', options: ["ã”ã˜", "ã”ã˜ã˜ã‚…ã£ã·ã‚“", "ã”ã˜ã¯ã‚“", "ã‚ãã˜"], answer: "ã”ã˜ã¯ã‚“" } ];

// --- PROGRESS TRACKING ---
let progress = {
    kanji: [],
    vocab: []
};

function loadProgress() {
    const savedProgress = localStorage.getItem('jlptN5Progress');
    if (savedProgress) {
        progress = JSON.parse(savedProgress);
    }
}

function saveProgress() {
    localStorage.setItem('jlptN5Progress', JSON.stringify(progress));
    updateProgressDashboard();
}

function toggleLearned(category, id, element) {
    const index = progress[category].indexOf(id);
    if (index > -1) {
        progress[category].splice(index, 1); // Remove if already learned
        element.classList.remove('learned');
    } else {
        progress[category].push(id); // Add if not learned
        element.classList.add('learned');
    }
    saveProgress();
}

// --- UI RENDERING ---
/**
 * Initializes the Speech Synthesis API.
 * This function "warms up" the API by fetching the list of voices.
 */
function initSpeechSynthesis() {
    if ('speechSynthesis' in window) {
        window.speechSynthesis.getVoices();
        if (window.speechSynthesis.onvoiceschanged !== undefined) {
            window.speechSynthesis.onvoiceschanged = () => {
                console.log("Speech synthesis voices loaded.");
            };
        }
    }
}

function pronounceWord(word, event) {
    if (event) event.stopPropagation();
    if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(word);
        utterance.lang = 'ja-JP';
        utterance.rate = 0.9;
        window.speechSynthesis.speak(utterance);
    } else {
        alert("Text-to-speech not supported by your browser.");
    }
}

function changeTab(tabName) {
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    document.getElementById(tabName).classList.add('active');
    document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
    document.querySelector(`.nav-item[onclick="changeTab('${tabName}')"]`).classList.add('active');
    
    document.getElementById('search-input').value = '';
    document.getElementById('mobile-search-input').value = '';
    handleSearch();
    
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    if (sidebar.classList.contains('open')) {
        sidebar.classList.remove('open');
        overlay.classList.add('hidden');
        document.body.classList.remove('sidebar-open');
    }
}

const createCard = (item, category, backGradient) => {
    const isLearned = progress[category].includes(item.id);
    let frontContent;
    if (category === 'kanji') {
        frontContent = `<p class="text-5xl sm:text-6xl font-bold font-noto-jp">${item.kanji}</p>`;
    } else { // vocab
        frontContent = `<div class="text-center">
                            <p class="text-3xl sm:text-4xl font-semibold font-noto-jp">${item.word}</p>
                            <button onclick="pronounceWord('${item.word}', event)" class="mt-2 text-gray-400 hover:text-blue-500 transition-colors">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a.5.5 0 01.707 0A9.957 9.957 0 0118 10a9.957 9.957 0 01-2.636 7.071.5.5 0 01-.707-.707A8.957 8.957 0 0017 10a8.957 8.957 0 00-2.343-6.364.5.5 0 010-.707z" clip-rule="evenodd"></path><path d="M16.293 4.343a.5.5 0 01.707 0A6.957 6.957 0 0118 10a6.957 6.957 0 01-1.001 3.657.5.5 0 01-.894-.448A5.957 5.957 0 0017 10a5.957 5.957 0 00-.894-3.436.5.5 0 01.187-.82z"></path></svg>
                            </button>
                        </div>`;
    }
    
    const backContent = `<p class="text-xl font-bold">${category === 'kanji' ? item.meaning : item.reading}</p><p>${category === 'kanji' ? `On: ${item.onyomi}<br>Kun: ${item.kunyomi || 'â€“'}` : item.meaning}</p>`;
    const searchTerms = `${item.kanji || item.word} ${item.onyomi || ''} ${item.kunyomi || ''} ${item.reading || ''} ${item.meaning}`.toLowerCase();

    return `<div class="card-container h-40" data-search="${searchTerms}">
                <div class="learn-toggle ${isLearned ? 'learned' : ''}" onclick="toggleLearned('${category}', '${item.id}', this)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                    </svg>
                </div>
                <div class="card h-full cursor-pointer" onclick="this.classList.toggle('is-flipped')">
                    <div class="card-inner">
                        <div class="card-face card-face-front p-2">${frontContent}</div>
                        <div class="card-face card-face-back" style="background: ${backGradient};">${backContent}</div>
                    </div>
                </div>
            </div>`;
};


const createKanjiSection = (data) => {
    let html = '';
    for (const section in data) {
        html += `<div class="glass-effect rounded-2xl p-5 mb-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-700">${section}</h3>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 gap-4">`;
        data[section].forEach(k => {
            html += createCard(k, 'kanji', 'linear-gradient(135deg, var(--accent-purple), #A78BFA)');
        });
        html += `</div></div>`;
    }
    return html;
};

const createVocabGrid = (data) => {
    let html = '';
    data.forEach(v => {
        html += createCard(v, 'vocab', 'linear-gradient(135deg, var(--accent-green), #4ADE80)');
    });
    document.getElementById('vocab-grid').innerHTML = html;
};

const createKanaChart = (data, icon, color) => {
    let html = '';
    for (const section in data) {
        html += `<div class="glass-effect rounded-2xl p-5 mb-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-700 flex items-center gap-2"><span class="text-2xl">${icon}</span> ${section}</h3>
                    <div class="grid grid-cols-3 xs:grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 gap-3">`;
        data[section].forEach(item => {
            const searchTerms = `${item.kana} ${item.romaji}`.toLowerCase();
            html += `<div class="kana-item flex flex-col items-center justify-center p-2 bg-white/50 rounded-xl border border-white/30 h-28 text-center" data-search="${searchTerms}">
                        <p class="text-4xl font-noto-jp" style="color:${color};">${item.kana}</p>
                        <p class="text-sm text-gray-500">${item.romaji}</p>
                        <button onclick="pronounceWord('${item.kana}', event)" class="mt-1 text-gray-400 hover:text-blue-500 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a.5.5 0 01.707 0A9.957 9.957 0 0118 10a9.957 9.957 0 01-2.636 7.071.5.5 0 01-.707-.707A8.957 8.957 0 0017 10a8.957 8.957 0 00-2.343-6.364.5.5 0 010-.707z" clip-rule="evenodd"></path><path d="M16.293 4.343a.5.5 0 01.707 0A6.957 6.957 0 0118 10a6.957 6.957 0 01-1.001 3.657.5.5 0 01-.894-.448A5.957 5.957 0 0017 10a5.957 5.957 0 00-.894-3.436.5.5 0 01.187-.82z"></path></svg>
                        </button>
                    </div>`;
        });
        html += `</div></div>`;
    }
    return html;
};

const createGrammarPoint = (g) => {
    const searchTerms = `${g.title} ${g.content.replace(/<[^>]*>?/gm, '')}`.toLowerCase();
    return `<div class="grammar-item glass-effect rounded-2xl overflow-hidden" data-search="${searchTerms}"><button class="w-full text-left p-5 font-semibold text-lg hover:bg-white/20 flex justify-between items-center transition-colors" onclick="this.classList.toggle('open')"><span>${g.title}</span><span class="accordion-icon text-xl transform transition-transform duration-300 text-gray-400"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></span></button><div class="accordion-content"><div class="p-5 pt-0 text-gray-600 leading-relaxed">${g.content}</div></div></div>`;
};

const createQuiz = (item) => {
    const questionsHtml = (item.questions || [{...item}]).map((q) => {
        const optionsHtml = q.options.map((option, i) => `<button class="quiz-option w-full text-left p-3 border-2 border-gray-200 rounded-lg bg-white hover:border-blue-300 transition-all duration-200" data-answer="${option}"><span class="font-semibold mr-2">${String.fromCharCode(97 + i)}.</span> ${option}</button>`).join('');
        return `<div class="question-block" data-correct-answer="${q.answer}"><p class="font-semibold mb-3 text-lg">${q.question}</p><div class="space-y-3">${optionsHtml}</div></div>`;
    }).join('<hr class="my-6 border-gray-200/80">');
    const passageOrDialogue = item.passage || item.dialogue;
    const searchTerms = `${item.title} ${passageOrDialogue.replace(/<[^>]*>?/gm, '')}`.toLowerCase();
    return `<div class="quiz-item glass-effect p-6 sm:p-8 rounded-2xl" data-search="${searchTerms}"><h3 class="text-xl font-bold mb-4">${item.title}</h3><div class="mb-6 p-4 rounded-lg bg-gray-50/70 border-l-4 border-blue-400">${passageOrDialogue}</div><div class="quiz-container space-y-6">${questionsHtml}</div><div class="mt-8 text-center"><button onclick="checkAnswers(this)" class="bg-blue-500 text-white font-bold py-3 px-8 rounded-lg transition-all duration-300 shadow-md hover:shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed">Check Answers</button><p class="result-text mt-4 font-semibold text-lg"></p></div></div>`;
};

function checkAnswers(button) {
    button.disabled = true;
    const quizContainer = button.closest('.quiz-item').querySelector('.quiz-container');
    let score = 0;
    const questionBlocks = quizContainer.querySelectorAll('.question-block');
    questionBlocks.forEach(block => {
        const correctAnswer = block.dataset.correctAnswer;
        const selectedOption = block.querySelector('.quiz-option.selected');
        block.querySelectorAll('.quiz-option').forEach(opt => { opt.disabled = true; });
        if (selectedOption) {
            if (selectedOption.dataset.answer === correctAnswer) { score++; selectedOption.classList.add('correct'); }
            else { selectedOption.classList.add('incorrect'); block.querySelector(`.quiz-option[data-answer="${correctAnswer}"]`).classList.add('correct'); }
        } else { block.querySelector(`.quiz-option[data-answer="${correctAnswer}"]`).classList.add('correct'); }
    });
    const resultEl = button.closest('.quiz-item').querySelector('.result-text');
    resultEl.textContent = `You got ${score} out of ${questionBlocks.length} correct!`;
    resultEl.style.color = (score === questionBlocks.length) ? 'var(--accent-green)' : 'var(--accent-red)';
}

function handleSearch(event) {
    const query = event ? event.target.value.toLowerCase().trim() : "";
    const activeTab = document.querySelector('.tab-content.active');
    if (!activeTab) return;

    const items = activeTab.querySelectorAll('[data-search]');
    items.forEach(item => {
        const searchData = item.dataset.search;
        if (searchData.includes(query)) {
            item.style.display = '';
        } else {
            item.style.display = 'none';
        }
    });
}

function createProgressCircle(progress, total, color, label, emoji) {
    const percentage = total > 0 ? (progress / total) * 100 : 0;
    const radius = 30;
    const circumference = 2 * Math.PI * radius;
    const offset = circumference - (percentage / 100) * circumference;

    return `
        <div class="flex items-center gap-4">
            <div class="relative">
                <svg class="w-20 h-20">
                    <circle class="text-gray-200/60" stroke-width="6" stroke="currentColor" fill="transparent" r="${radius}" cx="40" cy="40" />
                    <circle class="progress-circle" stroke-width="6" stroke-dasharray="${circumference}" stroke-dashoffset="${offset}"
                        stroke-linecap="round" stroke="url(#${color}-gradient)" fill="transparent" r="${radius}" cx="40" cy="40" />
                </svg>
                <span class="absolute text-lg font-bold top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">${Math.round(percentage)}%</span>
            </div>
            <div>
                <p class="font-bold text-lg">${emoji} ${label}</p>
                <p class="text-sm text-gray-600">${progress} / ${total} learned</p>
            </div>
        </div>
    `;
}

function updateProgressDashboard() {
    const overviewContainer = document.getElementById('progress-overview');
    const totalKanji = Object.values(kanjiData).flat().length;
    const totalVocab = vocabData.length;

    const kanjiProgress = progress.kanji.length;
    const vocabProgress = progress.vocab.length;

    overviewContainer.innerHTML = `
        <h2 class="text-xl font-bold mb-5">Progress Overview</h2>
        <div class="space-y-5">
            ${createProgressCircle(kanjiProgress, totalKanji, 'purple', 'N5 Kanji', 'ğŸ´')}
            ${createProgressCircle(vocabProgress, totalVocab, 'green', 'N5 Vocabulary', 'ğŸ“—')}
        </div>
        <svg width="0" height="0">
            <defs>
                <linearGradient id="purple-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#A78BFA" />
                    <stop offset="100%" stop-color="#8B5CF6" />
                </linearGradient>
                <linearGradient id="green-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#4ADE80" />
                    <stop offset="100%" stop-color="#22C55E" />
                </linearGradient>
            </defs>
        </svg>
    `;
}


// --- INITIALIZATION ---
window.onload = function() {
    initSpeechSynthesis();
    loadProgress();

    // Populate Kana
    document.getElementById('hiragana').innerHTML = createKanaChart(hiraganaData, 'ğŸŒ¸', 'var(--accent-pink)');
    document.getElementById('katakana').innerHTML = createKanaChart(katakanaData, 'ğŸ¤–', 'var(--accent-blue)');

    // Populate Kanji
    document.getElementById('kanji').innerHTML = createKanjiSection(kanjiData);

    // Populate Vocab
    createVocabGrid(vocabData);
    
    document.getElementById('grammar-container').innerHTML = grammarData.map(createGrammarPoint).join('');
    document.getElementById('reading-container').innerHTML = readingPassages.map(createQuiz).join('');
    document.getElementById('listening-container').innerHTML = listeningData.map(createQuiz).join('');

    document.querySelectorAll('.quiz-option').forEach(option => {
        option.addEventListener('click', () => {
            if (option.disabled) return;
            const questionBlock = option.closest('.question-block');
            questionBlock.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');
        });
    });

    // Mobile menu toggle
    const menuToggle = document.getElementById('menu-toggle');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    menuToggle.addEventListener('click', () => {
        sidebar.classList.toggle('open');
        overlay.classList.toggle('hidden');
        document.body.classList.toggle('sidebar-open');
    });
    overlay.addEventListener('click', () => {
        sidebar.classList.remove('open');
        overlay.classList.add('hidden');
        document.body.classList.remove('sidebar-open');
    });

    // Search event listener
    document.getElementById('search-input').addEventListener('input', handleSearch);
    document.getElementById('mobile-search-input').addEventListener('input', handleSearch);

    // Initial UI setup
    updateProgressDashboard();
    changeTab('hiragana');
};
</script>

</body>
</html>
